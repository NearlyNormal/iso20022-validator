<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ISO 20022 Validator</title>
  <!-- UIKit -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.25.12/dist/css/uikit.min.css">
  <script src="https://cdn.jsdelivr.net/npm/uikit@3.25.12/dist/js/uikit.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/uikit@3.25.12/dist/js/uikit-icons.min.js"></script>
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600;700&family=IBM+Plex+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- Highlight.js (regular script, not module) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-light.min.css" id="hljs-theme">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/xml.min.js"></script>
  <link rel="stylesheet" href="assets/style.css">
</head>
<body>

  <!-- Hidden select for internal use -->
  <select id="message-type-select" hidden>
    <option value="auto">Auto-detect</option>
    <option value="pacs.008">pacs.008</option>
    <option value="pain.001">pain.001</option>
    <option value="pacs.002">pacs.002</option>
    <option value="camt.053">camt.053</option>
    <option value="camt.054">camt.054</option>
    <option value="pacs.004">pacs.004</option>
    <option value="pacs.009">pacs.009</option>
    <option value="pain.002">pain.002</option>
    <option value="pain.008">pain.008</option>
    <option value="pacs.010">pacs.010</option>
    <option value="camt.052">camt.052</option>
  </select>

  <!-- NAVBAR -->
  <nav class="uk-navbar-container" uk-navbar>
    <div class="uk-navbar-left uk-margin-left">
      <span class="app-title"><span class="accent">&gt;</span> ISO 20022 Validator</span>
      <span class="version-badge">v1.2</span>
      <button class="glossary-btn" id="glossary-btn" type="button" title="About this validator">
        <img src="assets/info.svg" alt="About">
      </button>
    </div>
    <div class="uk-navbar-right uk-margin-right">
      <button class="validate-btn" id="validate-btn">
        <img src="assets/validate.svg" alt=""> Validate Format
      </button>
    </div>
  </nav>

  <!-- MAIN -->
  <div class="app-container">
    <div class="panels-grid">

      <!-- LEFT PANEL -->
      <div class="panel-left">
        <div class="panel-left-toolbar">
          <span class="panel-left-title">XML Input</span>
          <div class="toolbar-right">
            <div class="toolbar-buttons">
              <label class="toolbar-btn" style="margin:0">
                <img src="assets/upload.svg" alt=""> Upload File
                <input type="file" id="file-upload" accept=".xml,.txt" hidden>
              </label>
              <span class="toolbar-or">or</span>
              <div class="uk-inline">
                <button class="toolbar-btn" type="button" id="load-sample-btn">
                  <img src="assets/load.svg" alt=""> Load Sample
                </button>
                <div uk-dropdown="mode: click; pos: bottom-right" class="sample-dropdown">
                  <ul class="uk-nav uk-dropdown-nav">
                    <li class="uk-nav-header">Core Messages</li>
                    <li><a href="#" data-sample="pacs.008">pacs.008: FI to FI Credit Transfer</a></li>
                    <li><a href="#" data-sample="pain.001">pain.001: Customer Credit Transfer</a></li>
                    <li><a href="#" data-sample="pain.002">pain.002: Customer Payment Status Report</a></li>
                    <li><a href="#" data-sample="pacs.002">pacs.002: FI to FI Payment Status Report</a></li>
                    <li><a href="#" data-sample="camt.053">camt.053: Bank to Customer Statement</a></li>
                    <li><a href="#" data-sample="camt.052">camt.052: Intraday Account Report</a></li>
                    <li class="uk-nav-divider"></li>
                    <li class="uk-nav-header">Direct Debit</li>
                    <li><a href="#" data-sample="pain.008">pain.008: Customer Direct Debit</a></li>
                    <li><a href="#" data-sample="pacs.010">pacs.010: FI to FI Direct Debit</a></li>
                    <li class="uk-nav-divider"></li>
                    <li class="uk-nav-header">Extended Messages</li>
                    <li><a href="#" data-sample="camt.054">camt.054: Debit/Credit Notification</a></li>
                    <li><a href="#" data-sample="pacs.004">pacs.004: Payment Return</a></li>
                    <li><a href="#" data-sample="pacs.009">pacs.009: FI to FI Institution Transfer</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <select id="profile-select" class="profile-select">
              <option value="none">No profile (base ISO only)</option>
              <optgroup label="Europe — SEPA">
                <option value="pain.008+SEPA_CORE" data-base="pain.008">SEPA Core Direct Debit</option>
                <option value="pain.008+SEPA_B2B" data-base="pain.008">SEPA B2B Direct Debit</option>
                <option value="pacs.008+SEPA_SCT" data-base="pacs.008">SEPA Credit Transfer</option>
                <option value="pacs.008+SEPA_SCT_INST" data-base="pacs.008">SEPA Instant Credit Transfer</option>
              </optgroup>
              <optgroup label="Cross-border">
                <option value="pacs.008+SWIFT_CBPR" data-base="pacs.008">SWIFT CBPR+</option>
                <option disabled>CGI-MP Corporate (coming soon)</option>
              </optgroup>
              <optgroup label="United Kingdom">
                <option value="pacs.008+UK_CHAPS" data-base="pacs.008">UK CHAPS</option>
                <option disabled>UK Faster Payments (coming soon)</option>
                <option disabled>UK BACS Direct Debit (coming soon)</option>
              </optgroup>
              <optgroup label="United States">
                <option value="pacs.008+US_FEDWIRE" data-base="pacs.008">US Fedwire</option>
                <option value="pacs.008+US_RTP" data-base="pacs.008">US TCH RTP</option>
                <option disabled>US FedNow (coming soon)</option>
              </optgroup>
              <optgroup label="Canada">
                <option value="pain.008+CA_PAD" data-base="pain.008">Canadian PAD</option>
                <option disabled>Lynx (coming soon)</option>
              </optgroup>
              <optgroup label="Latin America">
                <option value="pacs.008+BR_SPI" data-base="pacs.008">Brazil SPI/Pix</option>
                <option value="pacs.008+MX_SPEI" data-base="pacs.008">Mexico SPEI</option>
              </optgroup>
              <optgroup label="Asia-Pacific">
                <option disabled>SG FAST (coming soon)</option>
                <option disabled>AU NPP (coming soon)</option>
                <option disabled>IN RTGS (coming soon)</option>
              </optgroup>
              <optgroup label="Switzerland">
                <option disabled>SIC (coming soon)</option>
              </optgroup>
            </select>
          </div>
        </div>
        <div class="editor-area">
          <div class="editor-wrap">
            <textarea id="xml-input" placeholder="Paste or upload an ISO 20022 XML message&#10;(or load a sample for quick testing)" spellcheck="false"></textarea>
            <pre id="xml-highlighted"><code id="xml-code" class="language-xml"></code></pre>
          </div>
        </div>
      </div>

      <!-- BLUE DIVIDER -->
      <div class="panel-divider"></div>

      <!-- RIGHT PANEL -->
      <div class="panel-right">
        <div class="panel-right-toolbar">
          <span class="panel-right-title">Validation Results</span>
          <div class="actions-dropdown-wrap" id="actions-dropdown-wrap">
            <div class="uk-inline">
              <button class="toolbar-btn" type="button"><img src="assets/actions.svg" alt=""> Actions ▾</button>
              <div uk-dropdown="mode: click; pos: bottom-right" class="actions-dropdown">
                <ul class="uk-nav uk-nav-default">
                  <li><a href="#" id="copy-report-btn"><img src="assets/copy.svg" alt="" class="dropdown-icon"> Copy JSON</a></li>
                  <li><a href="#" id="compare-sample-btn"><img src="assets/compare.svg" alt="" class="dropdown-icon"> Compare</a></li>
                  <li><a href="#" id="export-pdf-btn"><img src="assets/export.svg" alt="" class="dropdown-icon"> Export PDF</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="results-area">
          <div id="results-content" class="results-body">
            <div class="empty-state" id="empty-state">
              <img src="assets/info.svg" alt="" class="empty-state-icon">
              <div class="empty-state-text">
                Paste or upload an ISO 20022 XML message<br>
                in the left section of this page<br><br>
                Then click <strong>[Validate Format]</strong> to check whether<br>
                it is error-free, or get clear pointers
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- DIFF MODAL -->
  <div id="diff-modal" uk-modal>
    <div class="uk-modal-dialog uk-modal-body diff-modal-dialog" style="padding:0">
      <div class="diff-header">
        <h3>Diff: Your Message vs. Sample</h3>
        <button class="uk-modal-close" type="button" uk-close></button>
      </div>
      <div class="diff-body">
        <div class="diff-panel diff-panel-left" id="diff-left"></div>
        <div class="diff-panel diff-panel-right" id="diff-right"></div>
      </div>
    </div>
  </div>


  <!-- GLOSSARY MODAL -->
  <div id="glossary-modal" uk-modal>
    <div class="uk-modal-dialog uk-modal-body glossary-modal-dialog" style="padding:0">
      <div class="glossary-header">
        <h3>About This Validator</h3>
        <button class="uk-modal-close" type="button" uk-close></button>
      </div>
      <div class="glossary-body">
        <p>This tool checks whether your ISO 20022 XML payment messages are correctly formatted before you send them to a bank or clearing system.</p>

        <p>A payment message goes through <u>three layers of validation</u> before it is accepted. Getting past one layer does not guarantee the next.</p>

        <div class="uk-grid uk-grid-medium uk-margin-medium-top" uk-grid>
          <div class="uk-width-1-4">
            <span class="layer-label layer-1">Layer 1</span>
          </div>
          <div class="uk-width-3-4">
            <strong>Base ISO message structure</strong>
            <p>Are the required fields present? Are codes from the right lists? Are IBANs and BICs correctly formatted? This is what the ISO 20022 standard itself defines. Think of it as grammar. The sentence is well-formed.</p>
          </div>
        </div>

        <div class="uk-grid uk-grid-medium uk-margin-medium-top" uk-grid>
          <div class="uk-width-1-4">
            <span class="layer-label layer-2">Layer 2</span>
          </div>
          <div class="uk-width-3-4">
            <strong>Scheme and market practice rules</strong>
            <p>Payment schemes like SEPA, CHAPS, Fedwire, and SWIFT CBPR+ impose additional rules on top of the base standard. Fields that are optional in ISO become mandatory under a specific scheme. Code values get restricted. A message can be perfectly valid ISO and still be rejected because it is missing a Creditor Scheme ID or using the wrong Service Level code.</p>
          </div>
        </div>

        <div class="uk-grid uk-grid-medium uk-margin-medium-top" uk-grid>
          <div class="uk-width-1-4">
            <span class="layer-label layer-3">Layer 3</span>
          </div>
          <div class="uk-width-3-4">
            <strong>Bank implementation guides</strong>
            <p>Individual banks add their own rules: version pinning, rejecting optional elements they don't support, proprietary code lists, channel-specific headers. These "house rules" are different at every bank and are often buried in PDF implementation guides.</p>
          </div>
        </div>

        <div class="glossary-coverage uk-margin-medium-top">
          <p><strong>This tool covers Layer 1 and Layer 2.</strong> Select a scheme profile from the dropdown to validate against scheme-specific rules. Layer 3 is inherently bank-specific. A generic tool cannot cover it, but layers 1 and 2 together catch the majority of errors that can be caught before submission.</p>
        </div>
      </div>
    </div>
  </div>

  <script src="assets/app.js"></script>
</body>
</html>
